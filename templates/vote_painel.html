{% extends "base.html" %}
{% block content %}
  <div class="top">
    <h1 style="margin:0">Votar</h1>
    <span class="chip">EID: <b>{{ eid }}</b></span>
  </div>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="card">
        <ul style="margin:0 0 0 18px">
          {% for cat,msg in messages %}
            <li><b>{{ cat }}</b>: {{ msg }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  {% endwith %}

  {% if not session_vkey %}
    <div class="card">
      <b>Chave não validada.</b> Volte para a etapa anterior: <a href="/vote">inserir chave</a>.
    </div>
  {% endif %}

  <div class="card">
    <form method="POST" action="/vote/panel">
      <p class="muted">Defina a ordem de preferência (1 = mais preferido). Deixe em branco para não ranquear.</p>
      <table>
        <tr><th>Candidato</th><th>Rank</th></tr>
        {% for c in candidates %}
          <tr>
            <td>{{ c }}</td>
            <td>
              {% if "Branco" in c or "Nulo" in c %}
                <small class="muted">Use “Voto em Branco/Nulo” abaixo</small>
              {% else %}
                <input name="rank_{{ loop.index0 }}" style="width:80px" pattern="\d*">
                <input type="hidden" name="cand_{{ loop.index0 }}" value="{{ c }}">
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </table>

      <p>Ou escolha voto especial:
        <label><input type="radio" name="special_vote" value=""> (nenhum)</label>
        <label><input type="radio" name="special_vote" value="BLANK"> Branco</label>
        <label><input type="radio" name="special_vote" value="NULL"> Nulo</label>
      </p>

      <div class="actions">
        <button type="submit">Enviar voto</button>
        <a class="muted" href="/">Início</a>
      </div>
    </form>
  </div>
{% endblock %}
