{% extends "base.html" %}
{% block title %}Guia · Método de Schulze{% endblock %}

{% block content %}
<header class="card">
  <h1 style="margin:0">Método de Schulze — Guia Completo</h1>
  <p class="muted" style="margin:6px 0 0">
    Este guia explica como votar e como calculamos o resultado usando caminhos de maior força (Schulze),
    incluindo empates (mesma posição), omissão de candidatos, rejeição explícita e a diferença entre
    <b>Voto em Branco</b> e <b>Voto Nulo</b>.
  </p>
  <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
    <span class="tag">Preferências ranqueadas</span>
    <span class="tag">Empates permitidos</span>
    <span class="tag">Omissão permitida</span>
    <span class="tag">Caminhos mais fortes</span>
    <span class="tag">Auditoria aberta</span>
  </div>
</header>

<section class="card">
  <h2 style="margin-top:0">1) Como registrar seu voto</h2>
  <ol>
    <li>
      <b>Ranqueie os candidatos</b> com números (1 = mais preferido). Você pode:
      <ul>
        <li><b>Empatar</b> candidatos (mesmo número = mesma preferência).</li>
        <li><b>Omitir</b> candidatos (deixar em branco = nenhum ranque para eles).</li>
      </ul>
    </li>
    <li>
      Em vez de ranquear, você também pode escolher um voto especial:
      <ul>
        <li><b>Voto em Branco</b> — você participa, mas <i>não expressa preferência por ninguém</i>.</li>
        <li><b>Voto Nulo</b> — você participa, mas <i>expressa rejeição ao pleito</i> como um todo.</li>
      </ul>
    </li>
  </ol>

  <details style="margin-top:8px">
    <summary><b>Exemplos rápidos</b></summary>
    <div class="muted" style="margin-top:8px">
      <p><b>Ex. A (sem empates):</b> 1: Ana, 2: Bruno, 3: Carla — você prefere Ana &gt; Bruno &gt; Carla.</p>
      <p><b>Ex. B (com empate):</b> 1: Ana, 2: Bruno &amp; Carla (empate), 3: Diego — você prefere Ana &gt; (Bruno = Carla) &gt; Diego.</p>
      <p><b>Ex. C (omitindo):</b> 1: Carla, 2: Diego — você não se posicionou sobre Ana/Bruno; isso <i>não cria</i> uma preferência entre eles.</p>
      <p><b>Ex. D (Voto em Branco):</b> nenhum ranque; registra “Branco”.</p>
      <p><b>Ex. E (Voto Nulo):</b> registra rejeição ao pleito; ver seção 5.</p>
    </div>
  </details>
</section>

<section class="card">
  <h2 style="margin-top:0">2) Como o método de Schulze funciona</h2>
  <p>
    O método de Schulze é um método de Condorcet com “<i>caminhos mais fortes</i>”.
    A ideia central é comparar cada par de candidatos (A vs B) e somar quantos eleitores preferem A a B
    considerando o <b>peso</b> do voto. Em seguida, encontramos a força dos melhores caminhos indiretos
    (A &rarr; … &rarr; B) e decidimos o ranking final comparando essas forças.
  </p>

  <details>
    <summary><b>Passo a passo (resumo técnico)</b></summary>
    <ol>
      <li><b>Preferências pareadas (P):</b> para cada par (A,B), calcule <code>P[A][B]</code> = peso total que prefere A &gt; B.</li>
      <li><b>Caminhos mais fortes (S):</b> inicialize <code>S[A][B] = P[A][B]</code> se <code>P[A][B] &gt; P[B][A]</code>, senão 0.
        Depois, para todos i,j,k, atualize <code>S[j][k] = max(S[j][k], min(S[j][i], S[i][k]))</code>.</li>
      <li><b>Ordem final:</b> A precede B se <code>S[A][B] &gt; S[B][A]</code>. Empates permanecem.</li>
    </ol>
  </details>

  <div style="margin-top:10px">
    <b>Diagrama (conceito de caminho mais forte):</b>
    <pre style="white-space:pre-wrap;margin:8px 0 0">
A —40→ B —30→ C
│        ↑
└—35→ D —20┘

Força(A→C) por A→B→C = min(40,30) = 30
Força(A→C) por A→D→C = min(35,20) = 20
Caminho mais forte A→C = 30
    </pre>
  </div>
</section>

<section class="card">
  <h2 style="margin-top:0">3) Empates e omissões: como entram no cálculo</h2>
  <ul>
    <li>
      <b>Empates:</b> se você dá a mesma posição para X e Y, <i>você não expressa preferência</i> entre eles.
      Logo, seu voto <i>não</i> contribui para <code>P[X][Y]</code> nem para <code>P[Y][X]</code>.
    </li>
    <li>
      <b>Omissões:</b> candidatos sem número <i>não</i> são comparados pelo seu voto.
      Isso significa “sem informação” (nem X&gt;Y, nem Y&gt;X) a partir do seu voto.
    </li>
  </ul>

  <details>
    <summary><b>Mini-simulação textual</b></summary>
    <pre style="white-space:pre-wrap;margin:8px 0 0">
Candidatos: [Ana, Bruno, Carla]

Eleitor 1: 1 Ana, 2 Bruno, 3 Carla
Eleitor 2: 1 Bruno, 1 Carla (empate), (Ana omitida)
Eleitor 3: 1 Carla, 2 Ana, (Bruno omitido)

Comparações que contam:
- E1 contribui: Ana>Bruno, Ana>Carla, Bruno>Carla
- E2 contribui: Bruno>—?—Ana (omitida), Carla>—?—Ana (omitida), Bruno=Carla (sem preferência)
- E3 contribui: Carla>—?—Bruno (omitido), Carla>Ana, Ana>—?—Bruno (omitido)

Resultado: apenas os pares explicitamente preferidos entram nos totais P[a][b].
    </pre>
  </details>
</section>

<section class="card">
  <h2 style="margin-top:0">4) Como rejeitar <i>um</i> candidato específico</h2>
  <p>
    Se você rejeita alguém, coloque-o deliberadamente em uma posição <b>pior</b> que todos os que você tolera.
    Por exemplo, se você tolera Ana e Bruno, mas rejeita Carla, você pode:
  </p>
  <pre style="white-space:pre-wrap;margin:8px 0 0">
1 Ana, 2 Bruno, 3 Carla   ← Carla atrás de todos que você considera aceitáveis.
  </pre>
  <p class="muted">
    Isso garante que seu voto conte como <code>Ana &gt; Carla</code> e <code>Bruno &gt; Carla</code>.
    Se você omitir Carla <i>e</i> omitir todos os demais, você não cria comparações — nesse caso,
    a rejeição não é “explícita” na contagem par-a-par. Para rejeição ao pleito como um todo, use Nulo (ver seção 5).
  </p>
</section>

<section class="card">
  <h2 style="margin-top:0">5) Branco vs Nulo no nosso sistema</h2>
  <ul>
    <li>
      <b>Voto em Branco</b> — você participa, mas <i>não expressa nenhuma preferência</i>.
      Na contagem, o “Branco” é tratado como uma opção especial que não cria vantagens contra candidatos reais.
      É um registro de <i>neutralidade</i>.
    </li>
    <li>
      <b>Voto Nulo</b> — você participa e <b>expressa rejeição ao pleito</b>.
      É o instrumento correto quando você quer sinalizar que discorda do processo/consulta em si,
      não apenas que está indiferente entre os candidatos.
    </li>
  </ul>

  <details>
    <summary><b>Fluxo de decisão (didático)</b></summary>
    <pre style="white-space:pre-wrap;margin:8px 0 0">
Tem algum(s) candidato(s) aceitável(eis)?
 ├─ Sim → Ranqueie-os à frente. Rejeitados vão abaixo (ou omita se não quiser compará-los).
 └─ Não
     ├─ Indiferença entre todos → Branco
     └─ Rejeição ao pleito (processo) → Nulo  ← (expressa rejeição ao pleito)
    </pre>
  </details>
</section>

<section class="card">
  <h2 style="margin-top:0">6) Transparência e auditoria</h2>
  <p>
    Após o encerramento, publicamos:
  </p>
  <ul>
    <li><b>Ranking final</b> (ordem de candidatos pelo método de Schulze);</li>
    <li><b>Matriz par-a-par</b> (totais <code>P[a][b]</code>);</li>
    <li><b>Pacote de auditoria</b> anônimo, com logs e cédulas sem identificação pessoal.</li>
  </ul>
  <p class="muted">
    As chaves de votação são <i>hash</i>eadas nos registros de voto; não guardamos o texto da sua chave no voto.
  </p>
</section>

<section class="card">
  <h2 style="margin-top:0">7) Perguntas frequentes</h2>
  <details>
    <summary><b>Posso deixar candidatos de fora e ainda assim meu voto contar?</b></summary>
    <p class="muted" style="margin-top:8px">
      Sim. Candidatos omitidos só significam “sem preferência informada” por você. Seus ranques ainda
      contam para os pares que você comparou (por exemplo, 1 Ana &gt; 2 Bruno).
    </p>
  </details>
  <details>
    <summary><b>Empatar candidatos não enfraquece meu voto?</b></summary>
    <p class="muted" style="margin-top:8px">
      Empatar significa declarar indiferença entre eles. Seu voto continua
      forte <i>entre os pares que você diferenciou</i>. Onde você empatou, você não cria vantagem de um sobre o outro.
    </p>
  </details>
  <details>
    <summary><b>Quero rejeitar um candidato específico; omitir funciona?</b></summary>
    <p class="muted" style="margin-top:8px">
      Omitir não cria preferência contra ele. Para rejeitá-lo, posicione-o <b>abaixo</b> de todos que você tolera,
      para que seu voto contribua em todos os pares onde ele perde para os demais.
    </p>
  </details>
  <details>
    <summary><b>Qual voto expressa rejeição ao pleito?</b></summary>
    <p class="muted" style="margin-top:8px">
      <b>Voto Nulo</b>. O Branco sinaliza neutralidade; o Nulo sinaliza rejeição ao pleito.
    </p>
  </details>
</section>

<p class="center" style="margin-top:18px">
  <a href="/" class="tag">Início</a>
</p>
{% endblock %}
