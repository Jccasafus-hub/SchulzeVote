{% extends "base_admin.html" %}

{% block title %}Admin · Metadados da Eleição{% endblock %}

{% block content %}
  <h1>Admin · Metadados da Eleição</h1>

  {% if msg %}<p style="color:#10b981;margin:.5rem 0 0">{{ msg }}</p>{% endif %}
  {% if warn %}<p style="color:#f59e0b;margin:.5rem 0 0">{{ warn }}</p>{% endif %}

  <div class="card" style="margin-top:12px">
    <form method="POST" class="grid" style="grid-template-columns:1fr 1fr">
      <label>EID<br>
        <input type="text" name="eid" value="{{ election_id }}">
      </label>
      <label>Título<br>
        <input type="text" name="title" value="{{ (meta.title if meta else '') }}">
      </label>
      <label>Data<br>
        <input type="date" name="date" value="{{ (meta.date if meta else '') }}">
      </label>
      <label>Hora<br>
        <input type="time" name="time" value="{{ (meta.time if meta else '') }}">
      </label>
      <label>Fuso<br>
        <select name="tz">
          {% for tz in tz_options %}
            <option {% if meta and meta.tz==tz %}selected{% endif %}>{{ tz }}</option>
          {% endfor %}
        </select>
      </label>
      <label>Categoria (opcional)<br>
        <input type="text" name="category" value="{{ (meta.category if meta else '') }}">
      </label>

      <div style="grid-column:1/-1;margin-top:8px">
        <button class="btn accent" type="submit">Salvar metadados</button>
      </div>
    </form>
  </div>

  {% if meta %}
  <div class="card">
    <h2>Atual</h2>
    <p class="muted" style="margin:.25rem 0 0">
      <b>{{ meta.title }}</b><br>
      {{ election_id }} • {{ meta.date }} {{ meta.time }} {{ meta.tz }}
      {% if meta.category %} • {{ meta.category }}{% endif %}
    </p>
  </div>
  {% endif %}
{% endblock %}
